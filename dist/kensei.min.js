var Kensei={};Kensei.loader=function(){return{requireJS:function(e){var t=document.createElement("script");t.src=e,t.setAttribute("data-timestamp",+new Date),(document.head||document.body).appendChild(t)},ajaxGet:function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&200==n.status&&t(n.responseText)},n.send()}}}(),Kensei.DOM=function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t={defaultPostIndex:["<div>",'<p class="date">DATE</p>','<a href="?postId=SHORT" class="title">TITLE</a>','<p class="desc">DESCRIPTION</p>','<a href="?postId=SHORT" class="more">READ MORE</a>',"</div>"]};function n(e,t){var n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild)}return{renderString:n,renderDefaultPostIndex:function(s,i){var a,r,o=t.defaultPostIndex.join("");n(s,o=(o=(o=(o=o.replace(/DATE/g,(a=i.date,(r=new Date(a)).getDate()+" "+e[r.getMonth()]+" "+r.getFullYear()))).replace(/TITLE/g,i.title)).replace(/SHORT/g,i.date+"-"+i.short)).replace(/DESCRIPTION/g,i.desc))}}}(),Kensei.app=function(){var e=new showdown.Converter,t=/[?&]([^=#]+)=([^&#]*)/g,n=function(){var e,n={},s=window.location.href;for(;e=t.exec(s);)n[e[1]]=e[2];return n}(),s={posts:[],container:null,pagination:{postsPerPage:4},disqus:{pageUrl:"",disqusId:""}};function i(){var e,t=s.posts;s.posts.length>s.pagination.postsPerPage&&(e=(n.page-1)*s.pagination.postsPerPage,t=s.posts.slice(e,e+s.pagination.postsPerPage)),t.forEach(function(e){Kensei.DOM.renderDefaultPostIndex(s.container,e)}),function(){if(s.posts.length<=s.pagination.postsPerPage)return;Kensei.DOM.renderString(s.container,'<div id="pagination"></div>');for(var e=Math.ceil(s.posts.length/s.pagination.postsPerPage),t=(document.getElementById("pagination"),1);t<=e;t++)Kensei.DOM.renderString(s.container,'<a href="/?page='+t+'">'+t+"</a>")}()}function a(){Kensei.loader.ajaxGet("/posts/"+n.postId+".md",function(t){Kensei.DOM.renderString(s.container,e.makeHtml(t)),function(){if(!s.disqus.pageUrl||!s.disqus.disqusId)return;Kensei.DOM.renderString(s.container,'<div id="disqus_thread"></div>'),window.disqus_config=function(){this.page.url=s.disqus.pageUrl,this.page.identifier=n.postId},Kensei.loader.requireJS("//"+s.disqus.disqusId+".disqus.com/embed.js")}()})}return{init:function(e){s.container=e.container||document.getElementById("content"),s.pagination.postsPerPage=e.pagination&&e.pagination.postsPerPage||4,s.disqus.pageUrl=e.disqus&&e.disqus.pageUrl||"",s.disqus.disqusId=e.disqus&&e.disqus.disqusId||"",s.posts=e.posts,n.page=parseInt(n.page)||1,n.postId?a():i()}}}();